"use strict";(self["webpackChunkrenergetic_ui"]=self["webpackChunkrenergetic_ui"]||[]).push([[843],{3518:function(e,t,i){i.r(t),i.d(t,{default:function(){return ae}});var l=i(6252),s=i(3577),n=i(9963);const a={class:"grid"},o={class:"col-8"},r=(0,l.Uk)(" HeatMap editor "),d={key:0,class:"field grid"},p={class:"col"},u={id:"heatmapContainer"},h={key:0,class:"col-3 ren"},c={class:"card gf"},f={class:"p-fluid p-formgrid grid ren-submit"},m={key:0,class:"field md-3 sm-6"},g={key:1,class:"field md-3 sm-6"},b={key:2,class:"field md-3 sm-6"},v={class:"field grid ren-submit"},w={class:"col"},y={class:"col"};function k(e,t,i,k,F,C){const B=(0,l.up)("FileUpload"),S=(0,l.up)("v-image"),x=(0,l.up)("v-layer"),L=(0,l.up)("v-stage"),$=(0,l.up)("Card"),D=(0,l.up)("AreaDetails"),U=(0,l.up)("Listbox"),I=(0,l.up)("Button"),M=(0,l.up)("ProgressSpinner");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",a,[(0,l._)("div",o,[(0,l.Wm)($,null,{title:(0,l.w5)((()=>[r])),content:(0,l.w5)((()=>[null==F.bgImage?((0,l.wg)(),(0,l.iD)("div",d,[(0,l._)("div",p,[(0,l.Wm)(B,{ref:"FileUpload","with-credentials":"true,",name:"images[]","custom-upload":!0,multiple:!1,accept:"image/*","max-file-size":21e6,"show-upload-button":!1,disabled:!1,"cancel-label":e.$t("view.button.clear"),"choose-label":e.$t("view.button.choose"),onUploader:e.customUpload,onUpload:e.onUpload,onSelect:C.onSelect},{empty:(0,l.w5)((()=>[(0,l._)("p",null,(0,s.zw)(e.$t("form.heat_map_image")),1)])),_:1},8,["cancel-label","choose-label","onUploader","onUpload","onSelect"])])])):(0,l.kq)("",!0),(0,l.wy)((0,l._)("div",u,[(0,l.Wm)(L,{id:"heatmap",ref:"stage",config:F.stageSize,onClick:C.onClick},{default:(0,l.w5)((()=>[(0,l.Wm)(x,null,{default:(0,l.w5)((()=>[(0,l.Wm)(S,{config:{image:F.bgImage}},null,8,["config"])])),_:1})])),_:1},8,["config","onClick"])],512),[[n.F8,null!=F.bgImage]])])),_:1})]),F.bgImage?((0,l.wg)(),(0,l.iD)("div",h,[(0,l.Wm)(D,{class:"tile","model-value":F.selectedArea,"onUpdate:modelValue":t[0]||(t[0]=e=>F.selectedArea=e),onDelete:t[1]||(t[1]=e=>C.areaDelete(F.selectedArea))},null,8,["model-value"]),(0,l.Wm)($,{class:"tile"},{title:(0,l.w5)((()=>[(0,l.Uk)((0,s.zw)(e.$t("heatmap.areas")),1)])),content:(0,l.w5)((()=>[null!=F.heatmap?((0,l.wg)(),(0,l.j4)(U,{key:0,modelValue:F.selectedArea,"onUpdate:modelValue":t[2]||(t[2]=e=>F.selectedArea=e),options:F.heatmap.areas,"option-label":"label",style:{width:"15rem"}},null,8,["modelValue","options"])):(0,l.kq)("",!0)])),_:1})])):(0,l.kq)("",!0)]),(0,l._)("div",c,[(0,l._)("div",f,[!F.addMode&&F.bgImage?((0,l.wg)(),(0,l.iD)("div",m,[(0,l.Wm)(I,{label:e.$t("view.button.add_point"),onClick:C.addPoint},null,8,["label","onClick"])])):(0,l.kq)("",!0),F.addMode?((0,l.wg)(),(0,l.iD)("div",g,[(0,l.Wm)(I,{label:e.$t("view.button.confirm_point"),onClick:C.confirmPoint},null,8,["label","onClick"])])):(0,l.kq)("",!0),F.addMode?((0,l.wg)(),(0,l.iD)("div",b,[(0,l.Wm)(I,{label:e.$t("view.button.cancel"),onClick:C.cancelPoint},null,8,["label","onClick"])])):(0,l.kq)("",!0)]),(0,l._)("div",v,[(0,l._)("div",w,[(0,l.Wm)(I,{disabled:!F.hasFiles,label:e.$t("view.button.submit"),onClick:C.submit},null,8,["disabled","label","onClick"])]),(0,l._)("div",y,[(0,l.Wm)(I,{label:e.$t("view.button.cancel"),onClick:C.cancel},null,8,["label","onClick"])])]),e.spinner?((0,l.wg)(),(0,l.j4)(M,{key:0,style:{width:"10rem",height:"10rem",margin:"auto",display:"flex"},"stroke-width":"4"})):(0,l.kq)("",!0)])],64)}var F=i(4325),C={name:"ProgressBar",props:{value:{type:Number,default:null},mode:{type:String,default:"determinate"},showValue:{type:Boolean,default:!0}},computed:{containerClass(){return["p-progressbar p-component",{"p-progressbar-determinate":this.determinate,"p-progressbar-indeterminate":this.indeterminate}]},progressStyle(){return{width:this.value+"%",display:"flex"}},indeterminate(){return"indeterminate"===this.mode},determinate(){return"determinate"===this.mode}}};const B={key:0,class:"p-progressbar-label"},S={key:1,class:"p-progressbar-indeterminate-container"},x=(0,l.Wm)("div",{class:"p-progressbar-value p-progressbar-value-animate"},null,-1);function L(e,t,i,n,a,o){return(0,l.wg)(),(0,l.j4)("div",{role:"progressbar",class:o.containerClass,"aria-valuemin":"0","aria-valuenow":i.value,"aria-valuemax":"100"},[o.determinate?((0,l.wg)(),(0,l.j4)("div",{key:0,class:"p-progressbar-value p-progressbar-value-animate",style:o.progressStyle},[null!=i.value&&0!==i.value&&i.showValue?((0,l.wg)(),(0,l.j4)("div",B,[(0,l.WI)(e.$slots,"default",{},(()=>[(0,l.Uk)((0,s.zw)(i.value+"%"),1)]))])):(0,l.kq)("",!0)],4)):(0,l.kq)("",!0),o.indeterminate?((0,l.wg)(),(0,l.j4)("div",S,[x])):(0,l.kq)("",!0)],10,["aria-valuenow"])}function $(e,t){void 0===t&&(t={});var i=t.insertAt;if(e&&"undefined"!==typeof document){var l=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css","top"===i&&l.firstChild?l.insertBefore(s,l.firstChild):l.appendChild(s),s.styleSheet?s.styleSheet.cssText=e:s.appendChild(document.createTextNode(e))}}var D="\n.p-progressbar {\n    position: relative;\n    overflow: hidden;\n}\n.p-progressbar-determinate .p-progressbar-value {\n    height: 100%;\n    width: 0%;\n    position: absolute;\n    display: none;\n    border: 0 none;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n    -webkit-box-pack: center;\n        -ms-flex-pack: center;\n            justify-content: center;\n    overflow: hidden;\n}\n.p-progressbar-determinate .p-progressbar-label {\n    display: -webkit-inline-box;\n    display: -ms-inline-flexbox;\n    display: inline-flex;\n}\n.p-progressbar-determinate .p-progressbar-value-animate {\n    -webkit-transition: width 1s ease-in-out;\n    transition: width 1s ease-in-out;\n}\n.p-progressbar-indeterminate .p-progressbar-value::before {\n      content: '';\n      position: absolute;\n      background-color: inherit;\n      top: 0;\n      left: 0;\n      bottom: 0;\n      will-change: left, right;\n      -webkit-animation: p-progressbar-indeterminate-anim 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;\n              animation: p-progressbar-indeterminate-anim 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;\n}\n.p-progressbar-indeterminate .p-progressbar-value::after {\n    content: '';\n    position: absolute;\n    background-color: inherit;\n    top: 0;\n    left: 0;\n    bottom: 0;\n    will-change: left, right;\n    -webkit-animation: p-progressbar-indeterminate-anim-short 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) infinite;\n            animation: p-progressbar-indeterminate-anim-short 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) infinite;\n    -webkit-animation-delay: 1.15s;\n            animation-delay: 1.15s;\n}\n@-webkit-keyframes p-progressbar-indeterminate-anim {\n0% {\n    left: -35%;\n    right: 100%;\n}\n60% {\n    left: 100%;\n    right: -90%;\n}\n100% {\n    left: 100%;\n    right: -90%;\n}\n}\n@keyframes p-progressbar-indeterminate-anim {\n0% {\n    left: -35%;\n    right: 100%;\n}\n60% {\n    left: 100%;\n    right: -90%;\n}\n100% {\n    left: 100%;\n    right: -90%;\n}\n}\n@-webkit-keyframes p-progressbar-indeterminate-anim-short {\n0% {\n    left: -200%;\n    right: 100%;\n}\n60% {\n    left: 107%;\n    right: -8%;\n}\n100% {\n    left: 107%;\n    right: -8%;\n}\n}\n@keyframes p-progressbar-indeterminate-anim-short {\n0% {\n    left: -200%;\n    right: 100%;\n}\n60% {\n    left: 107%;\n    right: -8%;\n}\n100% {\n    left: 107%;\n    right: -8%;\n}\n}\n";$(D),C.render=L;var U=C,I=i(2124),M=i(6954),E=i(4019),W={name:"FileUpload",emits:["select","uploader","before-upload","progress","upload","error","before-send","clear","remove"],props:{name:{type:String,default:null},url:{type:String,default:null},mode:{type:String,default:"advanced"},multiple:{type:Boolean,default:!1},accept:{type:String,default:null},disabled:{type:Boolean,default:!1},auto:{type:Boolean,default:!1},maxFileSize:{type:Number,default:null},invalidFileSizeMessage:{type:String,default:"{0}: Invalid file size, file size should be smaller than {1}."},invalidFileTypeMessage:{type:String,default:"{0}: Invalid file type, allowed file types: {1}."},fileLimit:{type:Number,default:null},invalidFileLimitMessage:{type:String,default:"Maximum number of files exceeded, limit is {0} at most."},withCredentials:{type:Boolean,default:!1},previewWidth:{type:Number,default:50},chooseLabel:{type:String,default:null},uploadLabel:{type:String,default:null},cancelLabel:{type:String,default:null},customUpload:{type:Boolean,default:!1},showUploadButton:{type:Boolean,default:!0},showCancelButton:{type:Boolean,default:!0},style:null,class:null},duplicateIEEvent:!1,data(){return{uploadedFileCount:0,files:[],messages:[],focused:!1,progress:null}},methods:{onFileSelect(e){if("drop"!==e.type&&this.isIE11()&&this.duplicateIEEvent)return void(this.duplicateIEEvent=!1);this.messages=[],this.files=this.files||[];let t=e.dataTransfer?e.dataTransfer.files:e.target.files;for(let i of t)this.isFileSelected(i)||this.validate(i)&&(this.isImage(i)&&(i.objectURL=window.URL.createObjectURL(i)),this.files.push(i));this.$emit("select",{originalEvent:e,files:this.files}),this.fileLimit&&this.checkFileLimit(),this.auto&&this.hasFiles&&!this.isFileLimitExceeded()&&this.upload(),"drop"!==e.type&&this.isIE11()?this.clearIEInput():this.clearInputElement()},choose(){this.$refs.fileInput.click()},upload(){if(this.customUpload)this.fileLimit&&(this.uploadedFileCount+=this.files.length),this.$emit("uploader",{files:this.files});else{let e=new XMLHttpRequest,t=new FormData;this.$emit("before-upload",{xhr:e,formData:t});for(let i of this.files)t.append(this.name,i,i.name);e.upload.addEventListener("progress",(e=>{e.lengthComputable&&(this.progress=Math.round(100*e.loaded/e.total)),this.$emit("progress",{originalEvent:e,progress:this.progress})})),e.onreadystatechange=()=>{4===e.readyState&&(this.progress=0,e.status>=200&&e.status<300?(this.fileLimit&&(this.uploadedFileCount+=this.files.length),this.$emit("upload",{xhr:e,files:this.files})):this.$emit("error",{xhr:e,files:this.files}),this.clear())},e.open("POST",this.url,!0),this.$emit("before-send",{xhr:e,formData:t}),e.withCredentials=this.withCredentials,e.send(t)}},clear(){this.files=[],this.messages=null,this.$emit("clear"),this.isAdvanced&&this.clearInputElement()},onFocus(){this.focused=!0},onBlur(){this.focused=!1},isFileSelected(e){if(this.files&&this.files.length)for(let t of this.files)if(t.name+t.type+t.size===e.name+e.type+e.size)return!0;return!1},isIE11(){return!!window["MSInputMethodContext"]&&!!document["documentMode"]},validate(e){return this.accept&&!this.isFileTypeValid(e)?(this.messages.push(this.invalidFileTypeMessage.replace("{0}",e.name).replace("{1}",this.accept)),!1):!(this.maxFileSize&&e.size>this.maxFileSize)||(this.messages.push(this.invalidFileSizeMessage.replace("{0}",e.name).replace("{1}",this.formatSize(this.maxFileSize))),!1)},isFileTypeValid(e){let t=this.accept.split(",").map((e=>e.trim()));for(let i of t){let t=this.isWildcard(i)?this.getTypeClass(e.type)===this.getTypeClass(i):e.type==i||this.getFileExtension(e).toLowerCase()===i.toLowerCase();if(t)return!0}return!1},getTypeClass(e){return e.substring(0,e.indexOf("/"))},isWildcard(e){return-1!==e.indexOf("*")},getFileExtension(e){return"."+e.name.split(".").pop()},isImage(e){return/^image\//.test(e.type)},onDragEnter(e){this.disabled||(e.stopPropagation(),e.preventDefault())},onDragOver(e){this.disabled||(M.p7.addClass(this.$refs.content,"p-fileupload-highlight"),e.stopPropagation(),e.preventDefault())},onDragLeave(){this.disabled||M.p7.removeClass(this.$refs.content,"p-fileupload-highlight")},onDrop(e){if(!this.disabled){M.p7.removeClass(this.$refs.content,"p-fileupload-highlight"),e.stopPropagation(),e.preventDefault();const t=e.dataTransfer?e.dataTransfer.files:e.target.files,i=this.multiple||t&&1===t.length;i&&this.onFileSelect(e)}},onBasicUploaderClick(){this.hasFiles?this.upload():this.$refs.fileInput.click()},remove(e){this.clearInputElement();let t=this.files.splice(e,1)[0];this.files=[...this.files],this.$emit("remove",{file:t,files:this.files})},clearInputElement(){this.$refs.fileInput.value=""},clearIEInput(){this.$refs.fileInput&&(this.duplicateIEEvent=!0,this.$refs.fileInput.value="")},formatSize(e){if(0===e)return"0 B";let t=1e3,i=3,l=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],s=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,s)).toFixed(i))+" "+l[s]},isFileLimitExceeded(){return this.fileLimit&&this.fileLimit<=this.files.length+this.uploadedFileCount&&this.focused&&(this.focused=!1),this.fileLimit&&this.fileLimit<this.files.length+this.uploadedFileCount},checkFileLimit(){this.isFileLimitExceeded()&&this.messages.push(this.invalidFileLimitMessage.replace("{0}",this.fileLimit.toString()))},onMessageClose(){this.messages=null}},computed:{isAdvanced(){return"advanced"===this.mode},isBasic(){return"basic"===this.mode},advancedChooseButtonClass(){return["p-button p-component p-fileupload-choose",this.class,{"p-disabled":this.disabled,"p-focus":this.focused}]},basicChooseButtonClass(){return["p-button p-component p-fileupload-choose",this.class,{"p-fileupload-choose-selected":this.hasFiles,"p-disabled":this.disabled,"p-focus":this.focused}]},basicChooseButtonIconClass(){return["p-button-icon p-button-icon-left pi",{"pi-plus":!this.hasFiles||this.auto,"pi-upload":this.hasFiles&&!this.auto}]},basicChooseButtonLabel(){return this.auto?this.chooseButtonLabel:this.hasFiles?this.files.map((e=>e.name)).join(", "):this.chooseButtonLabel},hasFiles(){return this.files&&this.files.length>0},chooseDisabled(){return this.disabled||this.fileLimit&&this.fileLimit<=this.files.length+this.uploadedFileCount},uploadDisabled(){return this.disabled||!this.hasFiles||this.fileLimit&&this.fileLimit<this.files.length},cancelDisabled(){return this.disabled||!this.hasFiles},chooseButtonLabel(){return this.chooseLabel||this.$primevue.config.locale.choose},uploadButtonLabel(){return this.uploadLabel||this.$primevue.config.locale.upload},cancelButtonLabel(){return this.cancelLabel||this.$primevue.config.locale.cancel}},components:{FileUploadButton:F.Z,FileUploadProgressBar:U,FileUploadMessage:I.Z},directives:{ripple:E.Z}};const z={key:0,class:"p-fileupload p-fileupload-advanced p-component"},A={class:"p-fileupload-buttonbar"},j=(0,l.Wm)("span",{class:"p-button-icon p-button-icon-left pi pi-fw pi-plus"},null,-1),_={class:"p-button-label"},P={key:1,class:"p-fileupload-files"},T={class:"p-fileupload-filename"},q={key:2,class:"p-fileupload-empty"},O={key:1,class:"p-fileupload p-fileupload-basic p-component"},H={class:"p-button-label"};function N(e,t,i,a,o,r){const d=(0,l.up)("FileUploadButton"),p=(0,l.up)("FileUploadProgressBar"),u=(0,l.up)("FileUploadMessage"),h=(0,l.Q2)("ripple");return r.isAdvanced?((0,l.wg)(),(0,l.j4)("div",z,[(0,l.Wm)("div",A,[(0,l.wy)((0,l.Wm)("span",{class:r.advancedChooseButtonClass,style:i.style,onClick:t[2]||(t[2]=(...e)=>r.choose&&r.choose(...e)),onKeydown:t[3]||(t[3]=(0,n.D2)(((...e)=>r.choose&&r.choose(...e)),["enter"])),onFocus:t[4]||(t[4]=(...e)=>r.onFocus&&r.onFocus(...e)),onBlur:t[5]||(t[5]=(...e)=>r.onBlur&&r.onBlur(...e)),tabindex:"0"},[(0,l.Wm)("input",{ref:"fileInput",type:"file",onChange:t[1]||(t[1]=(...e)=>r.onFileSelect&&r.onFileSelect(...e)),multiple:i.multiple,accept:i.accept,disabled:r.chooseDisabled},null,40,["multiple","accept","disabled"]),j,(0,l.Wm)("span",_,(0,s.zw)(r.chooseButtonLabel),1)],38),[[h]]),i.showUploadButton?((0,l.wg)(),(0,l.j4)(d,{key:0,label:r.uploadButtonLabel,icon:"pi pi-upload",onClick:r.upload,disabled:r.uploadDisabled},null,8,["label","onClick","disabled"])):(0,l.kq)("",!0),i.showCancelButton?((0,l.wg)(),(0,l.j4)(d,{key:1,label:r.cancelButtonLabel,icon:"pi pi-times",onClick:r.clear,disabled:r.cancelDisabled},null,8,["label","onClick","disabled"])):(0,l.kq)("",!0)]),(0,l.Wm)("div",{ref:"content",class:"p-fileupload-content",onDragenter:t[6]||(t[6]=(...e)=>r.onDragEnter&&r.onDragEnter(...e)),onDragover:t[7]||(t[7]=(...e)=>r.onDragOver&&r.onDragOver(...e)),onDragleave:t[8]||(t[8]=(...e)=>r.onDragLeave&&r.onDragLeave(...e)),onDrop:t[9]||(t[9]=(...e)=>r.onDrop&&r.onDrop(...e))},[r.hasFiles?((0,l.wg)(),(0,l.j4)(p,{key:0,value:o.progress},null,8,["value"])):(0,l.kq)("",!0),((0,l.wg)(!0),(0,l.j4)(l.HY,null,(0,l.Ko)(o.messages,(e=>((0,l.wg)(),(0,l.j4)(u,{severity:"error",key:e,onClose:r.onMessageClose},{default:(0,l.w5)((()=>[(0,l.Uk)((0,s.zw)(e),1)])),_:2},1032,["onClose"])))),128)),r.hasFiles?((0,l.wg)(),(0,l.j4)("div",P,[((0,l.wg)(!0),(0,l.j4)(l.HY,null,(0,l.Ko)(o.files,((e,t)=>((0,l.wg)(),(0,l.j4)("div",{class:"p-fileupload-row",key:e.name+e.type+e.size},[(0,l.Wm)("div",null,[r.isImage(e)?((0,l.wg)(),(0,l.j4)("img",{key:0,role:"presentation",alt:e.name,src:e.objectURL,width:i.previewWidth},null,8,["alt","src","width"])):(0,l.kq)("",!0)]),(0,l.Wm)("div",T,(0,s.zw)(e.name),1),(0,l.Wm)("div",null,(0,s.zw)(r.formatSize(e.size)),1),(0,l.Wm)("div",null,[(0,l.Wm)(d,{type:"button",icon:"pi pi-times",onClick:e=>r.remove(t)},null,8,["onClick"])])])))),128))])):(0,l.kq)("",!0),e.$slots.empty&&!r.hasFiles?((0,l.wg)(),(0,l.j4)("div",q,[(0,l.WI)(e.$slots,"empty")])):(0,l.kq)("",!0)],544)])):r.isBasic?((0,l.wg)(),(0,l.j4)("div",O,[((0,l.wg)(!0),(0,l.j4)(l.HY,null,(0,l.Ko)(o.messages,(e=>((0,l.wg)(),(0,l.j4)(u,{severity:"error",key:e,onClose:r.onMessageClose},{default:(0,l.w5)((()=>[(0,l.Uk)((0,s.zw)(e),1)])),_:2},1032,["onClose"])))),128)),(0,l.wy)((0,l.Wm)("span",{class:r.basicChooseButtonClass,style:i.style,onMouseup:t[13]||(t[13]=(...e)=>r.onBasicUploaderClick&&r.onBasicUploaderClick(...e)),onKeydown:t[14]||(t[14]=(0,n.D2)(((...e)=>r.choose&&r.choose(...e)),["enter"])),onFocus:t[15]||(t[15]=(...e)=>r.onFocus&&r.onFocus(...e)),onBlur:t[16]||(t[16]=(...e)=>r.onBlur&&r.onBlur(...e)),tabindex:"0"},[(0,l.Wm)("span",{class:r.basicChooseButtonIconClass},null,2),(0,l.Wm)("span",H,(0,s.zw)(r.basicChooseButtonLabel),1),r.hasFiles?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)("input",{key:0,ref:"fileInput",type:"file",accept:i.accept,disabled:i.disabled,multiple:i.multiple,onChange:t[10]||(t[10]=(...e)=>r.onFileSelect&&r.onFileSelect(...e)),onFocus:t[11]||(t[11]=(...e)=>r.onFocus&&r.onFocus(...e)),onBlur:t[12]||(t[12]=(...e)=>r.onBlur&&r.onBlur(...e))},null,40,["accept","disabled","multiple"]))],38),[[h]])])):(0,l.kq)("",!0)}function V(e,t){void 0===t&&(t={});var i=t.insertAt;if(e&&"undefined"!==typeof document){var l=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css","top"===i&&l.firstChild?l.insertBefore(s,l.firstChild):l.appendChild(s),s.styleSheet?s.styleSheet.cssText=e:s.appendChild(document.createTextNode(e))}}var Z="\n.p-fileupload-content {\n    position: relative;\n}\n.p-fileupload-row {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n}\n.p-fileupload-row > div {\n    -webkit-box-flex: 1;\n        -ms-flex: 1 1 auto;\n            flex: 1 1 auto;\n    width: 25%;\n}\n.p-fileupload-row > div:last-child {\n    text-align: right;\n}\n.p-fileupload-content .p-progressbar {\n    width: 100%;\n    position: absolute;\n    top: 0;\n    left: 0;\n}\n.p-button.p-fileupload-choose {\n    position: relative;\n    overflow: hidden;\n}\n.p-button.p-fileupload-choose input[type=file] {\n    display: none;\n}\n.p-fileupload-choose.p-fileupload-choose-selected input[type=file] {\n    display: none;\n}\n.p-fileupload-filename {\n    word-break: break-all;\n}\n.p-fluid .p-fileupload .p-button {\n    width: auto;\n}\n";V(Z),W.render=N;var K=W,R=i(4612),Y=i(3561);class X{constructor(e,t=null,i=null){this.points=null!=t?t:[],this.id=e,this.value=e,this.label=e,this.dashboardId=i}}class G{constructor(e,t,i=null){this.areas=null!=i?i:[],this.id=e,this.imgUrl=t,this.label=e}}var Q=i(8382),J=i(9649);const ee=900,te=450;var ie=0,le={name:"HeatMapCreator",components:{FileUpload:K,Card:Q.Z,Listbox:Y.Z,AreaDetails:R.Z},props:{id:{type:String,default:null}},data(){return{stageSize:{width:ee,height:te},heatmap:null,hasFiles:!1,current:null,selectedArea:null,scale:1,bgImage:null,addMode:!1}},watch:{selectedArea:function(e,t){if(null!=t){let e=t.id,i=this.$refs.stage.getStage().findOne(`#${e}`);null!=i&&i.fill("#00D2FFAA")}if(null!=e){let t=e.id;this.$refs.stage.getStage().findOne(`#${t}`).fill("#AAAAFFAA")}}},created(){null==this.id?this.heatmap=new G("heatmap_"+ie++):console.info("todo:")},mounted(){},methods:{areaDelete(e){this.heatmap.areas=this.heatmap.areas.filter((t=>t.id!=e.id)),this.deletePoint(e.id),null!=this.current&&this.current.id==e.id&&(this.current=null)},onClick(e){if("CANVAS"==e.target.nodeName&&this.addMode){let i=this.$refs.stage.getStage();var t=i.findOne(`#${this.current.id}`);if(null!=t){this.current.points.push([e.layerX/this.scale,e.layerY/this.scale]);let i=this.current.points,l=(e,t)=>{e.beginPath(),i.forEach((t=>{e.lineTo(t[0],t[1])})),e.closePath(),e.fillStrokeShape(t)};t.setSceneFunc(l)}}},addPoint(){this.current=new X("area_"+ie++),this.current.points=[],this.addMode=!0,this.drawArea(this.current)},cancelPoint(){this.deletePoint(this.current.id),this.current=null,this.addMode=!1},deletePoint(e){let t=this.$refs.stage.getStage().findOne(`#${e}`);null!=t&&t.destroy()},drawArea(e){let t=new J["default"].Layer,i=this.$refs.stage.getStage(),l=new J["default"].Shape(this.getConfig(e));t.add(l),i.add(t),i.draw()},confirmPoint(){this.heatmap.areas.push(this.current),this.current=null,this.addMode=!1},getConfig(e){return{sceneFunc:function(t,i){t.beginPath(),e.points.forEach((e=>{t.lineTo(e[0],e[1])})),t.closePath(),t.fillStrokeShape(i)},fill:"#00D2FFAA",stroke:"black",strokeWidth:1,opacity:.75,listening:!0,id:e.id}},cancel(){null!=this.$refs.FileUpload&&this.$refs.FileUpload.clear()},onSelect(){if(void 0!==this.$refs.FileUpload?this.hasFiles=this.$refs.FileUpload.files.length>0:this.hasFiles=!1,this.hasFiles){const e=new window.Image;e.src=this.$refs.FileUpload.files[0].objectURL,e.onload=()=>{let t=this.$refs.stage.getStage();this.bgImage=e,this.scaleHeatMap(t,e),this.heatmap.imgUrl=e.src}}},scaleHeatMap(e,t){if(null!=t){var i=ee/t.width;this.scale=i,e.width(t.width),e.height(t.height),e.scale({x:i,y:i})}},async submit(){await this.$ren.dashboardApi.addHeatMap(this.heatmap).then((()=>{this.$router.push(this.$route.meta.from)}))}}},se=i(3744);const ne=(0,se.Z)(le,[["render",k]]);var ae=ne}}]);
//# sourceMappingURL=843.bb957ba3.js.map