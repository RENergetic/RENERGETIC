"use strict";(self["webpackChunkrenergetic_ui"]=self["webpackChunkrenergetic_ui"]||[]).push([[715],{7715:function(e,t,n){n.r(t),n.d(t,{default:function(){return L}});var i=n(6252),o=n(3577);const a={id:"dashboard-wrapper"};function r(e,t,n,r,s,l){const d=(0,i.up)("DotMenu"),c=(0,i.up)("Grafana"),p=(0,i.up)("Dock"),m=(0,i.up)("DeleteDashboard");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(d,{model:l.menuModel},null,8,["model"]),(0,i._)("div",a,[(0,i.Wm)(c,{url:l.dashboardUrl},null,8,["url"])]),(0,i.Wm)(p,{class:"ren-dock",model:s.dashboardMenu,position:"bottom"},{icon:(0,i.w5)((({item:e})=>[(0,i._)("div",{style:(0,o.j5)(l.getColor(e))},(0,o.zw)(e.label),5)])),_:1},8,["model"]),null!=s.dashboard?((0,i.wg)(),(0,i.j4)(m,{key:0,id:s.dashboard.id,ref:"deleteDashboard",label:s.dashboard.label},null,8,["id","label"])):(0,i.kq)("",!0)],64)}const s={id:"dashboard"},l=["src"];function d(e,t,n,o,a,r){return(0,i.wg)(),(0,i.iD)("div",s,[null!=n.url?((0,i.wg)(),(0,i.iD)("iframe",{key:0,src:n.url},null,8,l)):(0,i.kq)("",!0)])}var c={name:"Grafana",components:{},props:{url:{type:String,default:null}},mounted(){},methods:{}},p=n(3744);const m=(0,p.Z)(c,[["render",d]]);var u=m;function h(e,t,n,o,a,r){return(0,i.wg)(),(0,i.iD)("div")}var b={name:"DeleteDashboard",components:{},props:{id:{type:String,default:null},label:{type:String,default:null}},mounted(){},methods:{delete(){this.$confirm.require({message:this.$t("view.dashboard_delete_confirm",{label:this.label}),header:this.$t("view.dashboard_delete"),icon:"pi pi-exclamation-triangle",accept:()=>{this.deleteDashboard(this.id),this.$store.commit("view/dashboardsDel",this.id),this.$router.replace("Dashboard")},reject:()=>{this.$confirm.close()}})},async deleteDashboard(e){await this.$ren.dashboardApi.delete(e).then((()=>{this.$toast.add({severity:"success",summary:this.$t("view.toast.dashboard_delete_success",{label:this.label}),life:3e3})})).catch((()=>{this.$toast.add({severity:"error",summary:this.$t("view.toast.dashboard_delete_fail",{label:this.label}),life:3e3})}))}}};const k=(0,p.Z)(b,[["render",h]]);var f=k,g=n(4019),x={name:"DockSub",props:{model:{type:Array,default:null},templates:{type:null,default:null},exact:{type:Boolean,default:!0},tooltipOptions:null},data(){return{currentIndex:-3}},methods:{onListMouseLeave(){this.currentIndex=-3},onItemMouseEnter(e){this.currentIndex=e},onItemClick(e,t,n){this.disabled(t)?e.preventDefault():(t.command&&t.command({originalEvent:e,item:t}),t.to&&n&&n(e))},itemClass(e){return["p-dock-item",{"p-dock-item-second-prev":this.currentIndex-2===e,"p-dock-item-prev":this.currentIndex-1===e,"p-dock-item-current":this.currentIndex===e,"p-dock-item-next":this.currentIndex+1===e,"p-dock-item-second-next":this.currentIndex+2===e}]},linkClass(e,t){return["p-dock-action",{"p-disabled":this.disabled(e),"router-link-active":t&&t.isActive,"router-link-active-exact":this.exact&&t&&t.isExactActive}]},disabled(e){return"function"===typeof e.disabled?e.disabled():e.disabled}},directives:{ripple:g.Z}};const w={class:"p-dock-list-container"};function v(e,t,n,o,a,r){const s=(0,i.up)("router-link"),l=(0,i.Q2)("ripple"),d=(0,i.Q2)("tooltip");return(0,i.wg)(),(0,i.j4)("div",w,[(0,i.Wm)("ul",{ref:"list",class:"p-dock-list",role:"menu",onMouseleave:t[1]||(t[1]=(...e)=>r.onListMouseLeave&&r.onListMouseLeave(...e))},[((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(n.model,((e,t)=>((0,i.wg)(),(0,i.j4)("li",{class:r.itemClass(t),key:t,role:"none",onMouseenter:e=>r.onItemMouseEnter(t)},[n.templates["item"]?((0,i.wg)(),(0,i.j4)((0,i.LL)(n.templates["item"]),{key:1,item:e},null,8,["item"])):((0,i.wg)(),(0,i.j4)(i.HY,{key:0},[e.to&&!r.disabled(e)?((0,i.wg)(),(0,i.j4)(s,{key:0,to:e.to,custom:""},{default:(0,i.w5)((({navigate:t,href:o,isActive:a,isExactActive:s})=>[(0,i.wy)((0,i.Wm)("a",{href:o,role:"menuitem",class:r.linkClass(e,{isActive:a,isExactActive:s}),target:e.target,onClick:n=>r.onItemClick(n,e,t)},[n.templates["icon"]?((0,i.wg)(),(0,i.j4)((0,i.LL)(n.templates["icon"]),{key:1,item:e},null,8,["item"])):(0,i.wy)(((0,i.wg)(),(0,i.j4)("span",{key:0,class:["p-dock-action-icon",e.icon]},null,2)),[[l]])],10,["href","target","onClick"]),[[d,{value:e.label,disabled:!n.tooltipOptions},n.tooltipOptions]])])),_:2},1032,["to"])):(0,i.wy)(((0,i.wg)(),(0,i.j4)("a",{key:1,href:e.url,role:"menuitem",class:r.linkClass(e),target:e.target,onClick:t=>r.onItemClick(t,e),tabindex:r.disabled(e)?null:"0"},[n.templates["icon"]?((0,i.wg)(),(0,i.j4)((0,i.LL)(n.templates["icon"]),{key:1,item:e},null,8,["item"])):(0,i.wy)(((0,i.wg)(),(0,i.j4)("span",{key:0,class:["p-dock-action-icon",e.icon]},null,2)),[[l]])],10,["href","target","onClick","tabindex"])),[[d,{value:e.label,disabled:!n.tooltipOptions},n.tooltipOptions]])],64))],42,["onMouseenter"])))),128))],544)])}x.render=v;var y={name:"Dock",props:{position:{type:String,default:"bottom"},model:null,class:null,style:null,tooltipOptions:null,exact:{type:Boolean,default:!0}},computed:{containerClass(){return["p-dock p-component",`p-dock-${this.position}`,this.class]}},components:{DockSub:x}};function D(e,t,n,o,a,r){const s=(0,i.up)("DockSub");return(0,i.wg)(),(0,i.j4)("div",{class:r.containerClass,style:n.style},[(0,i.Wm)(s,{model:n.model,templates:e.$slots,exact:n.exact,tooltipOptions:n.tooltipOptions},null,8,["model","templates","exact","tooltipOptions"])],6)}function $(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!==typeof document){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===n&&i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}var C="\n.p-dock {\n    position: absolute;\n    z-index: 1;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-pack: center;\n        -ms-flex-pack: center;\n            justify-content: center;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n    pointer-events: none;\n}\n.p-dock-list-container {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    pointer-events: auto;\n}\n.p-dock-list {\n    margin: 0;\n    padding: 0;\n    list-style: none;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n    -webkit-box-pack: center;\n        -ms-flex-pack: center;\n            justify-content: center;\n}\n.p-dock-item {\n    -webkit-transition: all .2s cubic-bezier(0.4, 0, 0.2, 1);\n    transition: all .2s cubic-bezier(0.4, 0, 0.2, 1);\n    will-change: transform;\n}\n.p-dock-action {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-orient: vertical;\n    -webkit-box-direction: normal;\n        -ms-flex-direction: column;\n            flex-direction: column;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n    -webkit-box-pack: center;\n        -ms-flex-pack: center;\n            justify-content: center;\n    position: relative;\n    overflow: hidden;\n    cursor: default;\n}\n.p-dock-item-second-prev,\n.p-dock-item-second-next {\n    -webkit-transform: scale(1.2);\n            transform: scale(1.2);\n}\n.p-dock-item-prev,\n.p-dock-item-next {\n    -webkit-transform: scale(1.4);\n            transform: scale(1.4);\n}\n.p-dock-item-current {\n    -webkit-transform: scale(1.6);\n            transform: scale(1.6);\n    z-index: 1;\n}\n\n/* Position */\n/* top */\n.p-dock-top {\n    left: 0;\n    top: 0;\n    width: 100%;\n}\n.p-dock-top .p-dock-item {\n    -webkit-transform-origin: center top;\n            transform-origin: center top;\n}\n\n/* bottom */\n.p-dock-bottom {\n    left: 0;\n    bottom: 0;\n    width: 100%;\n}\n.p-dock-bottom .p-dock-item {\n    -webkit-transform-origin: center bottom;\n            transform-origin: center bottom;\n}\n\n/* right */\n.p-dock-right {\n    right: 0;\n    top: 0;\n    height: 100%;\n}\n.p-dock-right .p-dock-item {\n    -webkit-transform-origin: center right;\n            transform-origin: center right;\n}\n.p-dock-right .p-dock-list {\n    -webkit-box-orient: vertical;\n    -webkit-box-direction: normal;\n        -ms-flex-direction: column;\n            flex-direction: column;\n}\n\n/* left */\n.p-dock-left {\n    left: 0;\n    top: 0;\n    height: 100%;\n}\n.p-dock-left .p-dock-item {\n    -webkit-transform-origin: center left;\n            transform-origin: center left;\n}\n.p-dock-left .p-dock-list {\n    -webkit-box-orient: vertical;\n    -webkit-box-direction: normal;\n        -ms-flex-direction: column;\n            flex-direction: column;\n}\n";$(C),y.render=D;var M=y,j=n(9394),_={name:"Dashboard",components:{Dock:M,DotMenu:j.Z,Grafana:u,DeleteDashboard:f},emits:["updateMenu"],data(){return{dashboards:{},dashboard:null,dashboardMenu:[]}},computed:{dashboardUrl(){return this.dashboard?this.dashboard.url:null},menuModel(){return null!=this.dashboard?[{label:this.$t("menu.delete_dashboard"),icon:"pi pi-fw pi-minus-circle",command:()=>{this.$refs.deleteDashboard.delete(),this.$emit("updateMenu",null)}},{label:this.$t("menu.edit_dashboard"),icon:"pi pi-fw pi-pencil",command:()=>{this.$router.push(`/dashboard/edit/${this.dashboard.id}`)}}]:[]}},watch:{},created(){let e=this.$store.getters["view/dashboards"];try{e&&(this.dashboards=e,this.dashboard=e.find((e=>e.id==this.$route.params.dashboard_id)),this.dashboardMenu=this.createDashboardMenu())}catch(t){this.dashboard=null}},mounted(){this.$watch((()=>this.$route),(e=>{if(e.name==this.$options.name)for(let t of this.dashboards)t.id==e.params.dashboard_id&&(this.dashboard=t)}))},methods:{getColor(e){return e.id==this.$route.params.dashboard_id?"color:green":"color:initial"},createDashboardMenu(){if(0==this.dashboards.length)return[];var e=0;return e>=1?[]:this.dashboards.map((e=>{let t=`/dashboard/view/${e.id}`;return{label:e.label,icon:"pi pi-fw pi-align-left",id:e.id,to:t,command:()=>{this.$router.push(t)}}}))}}};const I=(0,p.Z)(_,[["render",r]]);var L=I}}]);
//# sourceMappingURL=715.b08e73f1.js.map