{"version":3,"file":"js/533-legacy.99cdd44d.js","mappings":"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","sources":["webpack://renergetic_ui/./src/views/admin/Users.vue","webpack://renergetic_ui/./src/components/admin/UserAdd.vue","webpack://renergetic_ui/./src/components/admin/UserAdd.vue?ef36","webpack://renergetic_ui/./src/views/admin/Users.vue?e7b0"],"sourcesContent":["/* eslint-disable vue/v-on-event-hyphenation */ /* eslint-disable vue/first-attribute-linebreak */ /* eslint-disable\r\nvue/attribute-hyphenation */\r\n<template>\r\n  <div>\r\n    <DataTable v-model:expandedRows=\"users.roles\" :value=\"users\" data-key=\"id\" responsive-layout=\"scroll\">\r\n      <Column :expander=\"true\" header-style=\"width: 3rem\" />\r\n      <Column field=\"username\" header=\"Username\" sortable></Column>\r\n      <Column field=\"name\" header=\"Name\" sortable></Column>\r\n      <Column field=\"email\" header=\"Email\" sortable></Column>\r\n      <Column :exportable=\"false\" style=\"min-width: 8rem\">\r\n        <template #body=\"user\">\r\n          <Button\r\n            icon=\"pi pi-user-edit\"\r\n            class=\"p-button-rounded p-button-warning mr-2\"\r\n            @click=\"\r\n              userToEdit = user.data;\r\n              addUserDialog = true;\r\n            \"\r\n          />\r\n          <Button\r\n            icon=\"pi pi-trash\"\r\n            class=\"p-button-rounded p-button-danger\"\r\n            @click=\"openDialog('deleteUser', user.data)\"\r\n          />\r\n        </template>\r\n      </Column>\r\n      <template #expansion=\"user\">\r\n        <div\r\n          v-if=\"user.data.roles != undefined && user.data.roles.length > 0\"\r\n          class=\"orders-subtable\"\r\n          style=\"margin: 0 2rem\"\r\n        >\r\n          <DataTable :value=\"user.data.roles\" responsive-layout=\"scroll\">\r\n            <Column :exportable=\"false\" style=\"min-width: 8rem\">\r\n              <template #body=\"role\">\r\n                <Button\r\n                  icon=\"pi pi-trash\"\r\n                  class=\"p-button-rounded p-button-danger\"\r\n                  @click=\"openDialog('deleteRole', user.data, role.data)\"\r\n                />\r\n              </template>\r\n            </Column>\r\n            <Column field=\"name\" header=\"Role Name\" sortable></Column>\r\n          </DataTable>\r\n        </div>\r\n        <Message v-else severity=\"info\">{{ `${user.data.username} haven't assigned roles` }}</Message>\r\n        <div v-if=\"availableRoles(user.data).length > 0\" class=\"grid p-fluid\" style=\"margin: 0 2rem\">\r\n          <div class=\"col-12 md:col-4\">\r\n            <div class=\"p-inputgroup\">\r\n              <select\r\n                class=\"p-component\"\r\n                style=\"width: 100%; text-align: center\"\r\n                @change=\"selectRole($event, user.data)\"\r\n              >\r\n                <option v-for=\"role of availableRoles(user.data)\" :key=\"role.id\" :value=\"JSON.stringify(role)\">\r\n                  {{ role.name }}\r\n                </option>\r\n              </select>\r\n              <Button icon=\"pi pi-plus\" class=\"p-button-success\" @click=\"addRole(user.data)\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </template>\r\n    </DataTable>\r\n    <Toolbar>\r\n      <template #start>\r\n        <Button\r\n          label=\"Add new user\"\r\n          icon=\"pi pi-user-plus\"\r\n          class=\"mr-2 p-button-success\"\r\n          @click=\"\r\n            userToEdit = undefined;\r\n            addUserDialog = true;\r\n          \"\r\n        />\r\n      </template>\r\n    </Toolbar>\r\n    <Dialog\r\n      v-model:visible=\"deleteDialog.visible\"\r\n      :style=\"{ width: '450px' }\"\r\n      :header=\"deleteDialog.header\"\r\n      :modal=\"true\"\r\n    >\r\n      <div class=\"confirmation-content\">\r\n        <i class=\"pi pi-exclamation-circle mr-3\" style=\"font-size: 2rem; margin: 0em 0.4em\" />\r\n        <span v-if=\"userToChange\">{{ deleteDialog.text }}</span>\r\n      </div>\r\n      <template #footer>\r\n        <Button\r\n          label=\"No\"\r\n          icon=\"pi pi-times\"\r\n          class=\"p-button-text\"\r\n          style=\"color: var(--orange-300)\"\r\n          @click=\"deleteDialog.visible = false\"\r\n        />\r\n        <Button label=\"Yes\" icon=\"pi pi-check\" class=\"p-button-text\" @click=\"deleteResource()\" />\r\n      </template>\r\n    </Dialog>\r\n    <UserAdd :users=\"users\" :edit-user=\"userToEdit\" :visible=\"addUserDialog\" @close=\"closeAddUserDialog\"></UserAdd>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport UserAdd from \"../../components/admin/UserAdd.vue\";\r\n\r\nexport default {\r\n  name: \"Users\",\r\n  components: {\r\n    UserAdd,\r\n  },\r\n  data() {\r\n    return {\r\n      users: [],\r\n      roles: [],\r\n      userToEdit: undefined,\r\n      userToChange: undefined,\r\n      roleToChange: undefined,\r\n      deleteDialog: {\r\n        visible: false,\r\n        header: \"Delete\",\r\n        text: \"Are you sure to delete this\",\r\n        delete: undefined, // user | role,\r\n      },\r\n      addUserDialog: false,\r\n    };\r\n  },\r\n  async created() {\r\n    this.users = await this.$keycloak.getUsers();\r\n    this.roles = await this.$keycloak.getClientRoles();\r\n  },\r\n  mounted() {},\r\n  methods: {\r\n    availableRoles(user) {\r\n      let availableRoles = this.roles.map((object) => ({ ...object }));\r\n      for (let role of user.roles) {\r\n        availableRoles.splice(availableRoles.map((r) => r.id).indexOf(role.id), 1);\r\n      }\r\n      if (availableRoles != undefined && availableRoles.length > 0) user.addRole = availableRoles[0];\r\n      return availableRoles;\r\n    },\r\n    openDialog(dialogName, user, role = undefined) {\r\n      this.userToChange = user;\r\n      this.roleToChange = role;\r\n      switch (dialogName) {\r\n        case \"deleteRole\":\r\n          this.deleteDialog.delete = \"role\";\r\n          this.deleteDialog.header = \"Delete Role\";\r\n          this.deleteDialog.text = `Are you sure to delete ${role.name} role from ${user.username}?`;\r\n          this.deleteDialog.visible = true;\r\n          break;\r\n        case \"deleteUser\":\r\n          this.deleteDialog.delete = \"user\";\r\n          this.deleteDialog.header = \"Delete User\";\r\n          this.deleteDialog.text = `Are you sure to delete ${user.username}? This action cannot be reversed`;\r\n          this.deleteDialog.visible = true;\r\n          break;\r\n        default:\r\n          this.deleteDialog.delete = undefined;\r\n          break;\r\n      }\r\n    },\r\n    async closeAddUserDialog(value) {\r\n      if (value != undefined) {\r\n        this.users = await this.$keycloak.getUsers();\r\n        console.log(this.users);\r\n      }\r\n      this.addUserDialog = false;\r\n    },\r\n    addRole(user) {\r\n      if (user.addRole != undefined) {\r\n        console.error(user.addRole);\r\n        this.$keycloak.assignRolesToUser(user.id, Array(user.addRole));\r\n        user.roles.push(user.addRole);\r\n      }\r\n    },\r\n    selectRole(event, user) {\r\n      user.addRole = JSON.parse(event.target.value);\r\n    },\r\n    deleteResource() {\r\n      if (this.deleteDialog.delete == \"role\" && this.userToChange && this.roleToChange) {\r\n        let userFromList = this.users[this.users.indexOf(this.userToChange)];\r\n        console.error(userFromList);\r\n        this.$keycloak.unAssignRolesToUser(this.userToChange.id, Array(this.roleToChange));\r\n        userFromList.roles.splice(userFromList.roles.indexOf(this.roleToChange), 1);\r\n        this.deleteDialog.visible = false;\r\n        this.deleteDialog.delete = undefined;\r\n      } else if (this.deleteDialog.delete == \"user\" && this.userToChange) {\r\n        this.$keycloak.deleteUser(this.userToChange.id);\r\n        this.users.splice(this.users.indexOf(this.userToChange), 1);\r\n        this.deleteDialog.visible = false;\r\n        this.deleteDialog.delete = undefined;\r\n      }\r\n    },\r\n    /*onRowExpand(event) {\r\n            this.$toast.add({severity: 'info', summary: 'Product Expanded', detail: event.data.name, life: 3000});\r\n        },\r\n        onRowCollapse(event) {\r\n            this.$toast.add({severity: 'success', summary: 'Product Collapsed', detail: event.data.name, life: 3000});\r\n        }*/\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.confirmation-content {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n@media screen and (max-width: 960px) {\r\n  ::v-deep(.p-toolbar) {\r\n    flex-wrap: wrap;\r\n\r\n    .p-button {\r\n      margin-bottom: 0.25rem;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","/* eslint-disable vue/v-on-event-hyphenation */ /* eslint-disable vue/first-attribute-linebreak */ /* eslint-disable\r\nvue/attribute-hyphenation */\r\n<template>\r\n  <Dialog\r\n    :visible=\"visible\"\r\n    :style=\"{ width: '450px' }\"\r\n    header=\"Add new user\"\r\n    :modal=\"true\"\r\n    @update:visible=\"cancelAdd\"\r\n  >\r\n    <div class=\"p-fluid grid\">\r\n      <span class=\"p-float-label p-my-4\">\r\n        <InputText id=\"username\" v-model=\"user.username\" type=\"text\" :class=\"error.username ? 'p-invalid' : ''\" />\r\n        <label for=\"username\">Username</label>\r\n      </span>\r\n      <span class=\"p-float-label p-my-4\">\r\n        <InputText id=\"firstname\" v-model=\"user.firstName\" type=\"text\" />\r\n        <label for=\"firstname\">User First Name</label>\r\n      </span>\r\n      <span class=\"p-float-label p-my-4\">\r\n        <InputText id=\"lastname\" v-model=\"user.lastName\" type=\"text\" />\r\n        <label for=\"lastname\">User Surname</label>\r\n      </span>\r\n      <span class=\"p-float-label p-my-4\">\r\n        <InputText id=\"email\" v-model=\"user.email\" type=\"text\" :class=\"error.email ? 'p-invalid' : ''\" />\r\n        <label for=\"email\">User E-mail</label>\r\n      </span>\r\n      <span class=\"p-float-label p-my-4\">\r\n        <Password id=\"password\" v-model=\"user.credentials[0].value\" :class=\"error.password ? 'p-invalid' : ''\" />\r\n        <label for=\"email\">User Password</label>\r\n      </span>\r\n      <ToggleButton\r\n        v-model=\"user.credentials[0].temporary\"\r\n        on-label=\"Temporal Password\"\r\n        off-label=\"Permanent Password\"\r\n        on-icon=\"pi pi-check\"\r\n        off-icon=\"pi pi-times\"\r\n      />\r\n    </div>\r\n    <template #footer>\r\n      <Button\r\n        label=\"No\"\r\n        icon=\"pi pi-times\"\r\n        class=\"p-button-text p-left\"\r\n        style=\"color: var(--orange-300)\"\r\n        @click=\"cancelAdd()\"\r\n      />\r\n      <Button label=\"Yes\" icon=\"pi pi-check\" class=\"p-button-text\" @click=\"confirmAdd()\" />\r\n    </template>\r\n  </Dialog>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"UserAdd\",\r\n  props: {\r\n    users: {\r\n      type: Array,\r\n      required: true,\r\n    },\r\n    editUser: {\r\n      type: Object,\r\n      required: false,\r\n      default: undefined,\r\n    },\r\n    visible: Boolean,\r\n  },\r\n  emits: [\"close\"],\r\n  data() {\r\n    return {\r\n      user: {\r\n        enabled: true,\r\n        attributes: {},\r\n        groups: [],\r\n        username: undefined,\r\n        firstName: undefined,\r\n        lastName: undefined,\r\n        email: undefined,\r\n        emailVerified: \"false\",\r\n        credentials: [{ type: \"password\", value: undefined, temporary: true }],\r\n      },\r\n      error: {\r\n        username: false,\r\n        email: false,\r\n        password: false,\r\n      },\r\n    };\r\n  },\r\n  watch: {\r\n    visible: function (value) {\r\n      if (value) {\r\n        if (this.editUser != undefined) {\r\n          this.user = this.editUser;\r\n          this.user.credentials = [{ type: \"password\", value: undefined, temporary: true }];\r\n          delete this.user.roles;\r\n          delete this.user.name;\r\n        }\r\n      } else this.reset();\r\n    },\r\n  },\r\n  methods: {\r\n    confirmAdd() {\r\n      let error = false;\r\n      console.error(this.user);\r\n      for (let user of this.users) {\r\n        if (\r\n          this.user.username === undefined ||\r\n          (this.user.username === user.username &&\r\n            (this.editUser == undefined || this.user.username != this.editUser.username))\r\n        ) {\r\n          error = true;\r\n          this.error.username = true;\r\n        }\r\n        if (\r\n          this.user.email != undefined &&\r\n          this.user.email === user.email &&\r\n          (this.editUser == undefined || this.user.email != this.editUser.email)\r\n        ) {\r\n          error = true;\r\n          this.error.email = true;\r\n        }\r\n      }\r\n      if (this.editUser != undefined && this.user.credentials[0].value === undefined) {\r\n        delete this.user.credentials;\r\n      } else if (this.user.credentials[0].value === undefined || this.user.credentials[0].value == 0) {\r\n        error = true;\r\n        this.error.password = true;\r\n      }\r\n\r\n      if (!error && this.editUser === undefined) {\r\n        this.$keycloak.createUser(this.user).then(() => {\r\n          this.$emit(\"close\", this.user);\r\n        });\r\n        //TODO: catch posible errors\r\n      } else if (!error) {\r\n        this.$keycloak.updateUser(this.user).then(() => {\r\n          this.$emit(\"close\", this.user);\r\n        });\r\n      }\r\n    },\r\n    cancelAdd() {\r\n      this.$emit(\"close\", undefined);\r\n    },\r\n    reset() {\r\n      Object.assign(this.$data, this.$options.data.apply(this));\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@media screen and (max-width: 960px) {\r\n}\r\n</style>\r\n","import { render } from \"./UserAdd.vue?vue&type=template&id=ec38c472&scoped=true\"\nimport script from \"./UserAdd.vue?vue&type=script&lang=js\"\nexport * from \"./UserAdd.vue?vue&type=script&lang=js\"\n\nimport \"./UserAdd.vue?vue&type=style&index=0&id=ec38c472&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\X49702PA\\\\Desktop\\\\Proyectos\\\\RENergetic\\\\renergetic\\\\front\\\\renergetic_ui\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-ec38c472\"]])\n\nexport default __exports__","import { render } from \"./Users.vue?vue&type=template&id=7dd8a968&scoped=true\"\nimport script from \"./Users.vue?vue&type=script&lang=js\"\nexport * from \"./Users.vue?vue&type=script&lang=js\"\n\nimport \"./Users.vue?vue&type=style&index=0&id=7dd8a968&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\X49702PA\\\\Desktop\\\\Proyectos\\\\RENergetic\\\\renergetic\\\\front\\\\renergetic_ui\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-7dd8a968\"]])\n\nexport default __exports__"],"names":["class","style","expandedRows","users","roles","value","expansion","undefined","user","data","length","exportable","body","icon","openDialog","role","field","header","sortable","severity","username","availableRoles","selectRole","$event","key","id","JSON","stringify","name","addRole","expander","start","label","visible","deleteDialog","modal","footer","deleteResource","userToChange","text","userToEdit","addUserDialog","closeAddUserDialog","for","cancelAdd","confirmAdd","type","error","firstName","lastName","email","credentials","password","temporary","props","Array","required","editUser","Object","default","Boolean","emits","enabled","attributes","groups","emailVerified","watch","this","reset","methods","console","$keycloak","updateUser","then","$emit","createUser","assign","$data","$options","apply","__exports__","components","UserAdd","roleToChange","delete","created","getUsers","getClientRoles","mounted","map","object","splice","r","indexOf","dialogName","log","assignRolesToUser","push","event","parse","target","userFromList","unAssignRolesToUser","deleteUser","render"],"sourceRoot":""}